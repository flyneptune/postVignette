function initHelpers(){(controls=new THREE.OrbitControls(camera,renderer.domElement)).target=new THREE.Vector3(0,0,0)}function showAxes(){var e=new THREE.Geometry,t=new THREE.Vector3(0,0,0);e.vertices.push(t);var n=new THREE.PointsMaterial({color:"cyan",size:10,sizeAttenuation:!1}),a=new THREE.Points(e,n);scene.add(a),drawLine(new THREE.Vector3(0,0,0),new THREE.Vector3(100,0,0),"rgb(255,0,0)"),drawLine(new THREE.Vector3(0,0,0),new THREE.Vector3(0,100,0),"rgb(0,255,0)"),drawLine(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,100),"rgb(0,0,255)")}function drawLine(e,t,n){var a=new THREE.Geometry;a.vertices.push(e),a.vertices.push(t);var r=new THREE.LineBasicMaterial({color:n,linewidth:2}),o=(new THREE.LineBasicMaterial({color:n,linewidth:2}),new THREE.LineBasicMaterial({color:n,linewidth:2}),new THREE.Line(a,r,THREE.LineStrip));scene.add(o)}function init(){initRenderer(),initCamera(),initLights(),initPostprocessing(),initLoadingManager(),initMaterials(),spawnWorld(),initHelpers(),requestAnimationFrame(main)}function main(){if(assetsLoaded){if(updateCubeCams){for(var e=0;e<arCubeCameras.length;e++){var t=arCubeCameras[e][0],n=arCubeCameras[e][1];t.visible=!1,n.update(renderer,scene),t.visible=!0}++bla>2&&(updateCubeCams=!1)}controls.update(),composer.render()}requestAnimationFrame(main)}function initMaterials(){maxAnisotropy=renderer.getMaxAnisotropy()}function createMaterial(e,t,n,a,r,o,i,s,c,d){var l=new THREE.MeshPhysicalMaterial({});return l.reflectivity=i,l.clearCoat=s,l.clearCoatRoughness=c,l.map=(new THREE.TextureLoader).load(e+"albedo"),l.map.anisotropy=maxAnisotropy,l.map.wrapS=THREE.RepeatWrapping,l.map.wrapT=THREE.RepeatWrapping,l.map.repeat.set(d,d),l.normalMap=(new THREE.TextureLoader).load(e+"normal"),l.normalMap.anisotropy=maxAnisotropy,l.normalScale=t,l.normalMap.wrapS=THREE.RepeatWrapping,l.normalMap.wrapT=THREE.RepeatWrapping,l.normalMap.repeat.set(d,d),n&&(l.metalnessMap=(new THREE.TextureLoader).load(e+"metalness"),l.metalnessMap.anisotropy=maxAnisotropy,l.metalnessMap.wrapS=THREE.RepeatWrapping,l.metalnessMap.wrapT=THREE.RepeatWrapping,l.metalnessMap.repeat.set(d,d)),l.metalness=a,r&&(l.roughnessMap=(new THREE.TextureLoader).load(e+"roughness"),l.roughnessMap.anisotropy=maxAnisotropy,l.roughnessMap.wrapS=THREE.RepeatWrapping,l.roughnessMap.wrapT=THREE.RepeatWrapping,l.roughnessMap.repeat.set(d,d)),l.roughness=o,l}function initLights(){}function newPointLight(e,t,n,a,r){var o=new THREE.PointLight(a,r,0,2);o.castShadow=!0,o.shadowMapWidth=1024,o.shadowMapHeight=1024,o.shadowCameraLeft=-200,o.shadowCameraRight=200,o.shadowCameraBottom=-200,o.shadowCameraTop=200,o.shadowCameraNear=1,o.shadowCameraFar=3e3,o.position.set(e,t,n),scene.add(o);var i=new THREE.PointLightHelper(o,10);return scene.add(i),o}function initLoadingManager(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");e.appendChild(t),e.appendChild(n),document.body.appendChild(e),n.innerHTML="Loading...",e.style="\t\tposition: absolute;\t\tz-index: 500;\t\tright:0px;\t\tleft:0px;\t\ttop:0px;\t\tbottom:0px;\t\tmargin: auto;\t\twidth:300px;\t\theight:40px;\t\tbackground-color:#555555;border-radius: 4px;",t.style="\t\twidth:25px;\t\theight:40px;\t\tbackground-color:#5E9CE5;\t\tborder-radius: 4px;",n.style="\t\tcolor:#fff;\t\tposition: absolute;\t\tz-index:2;\t\tright:0px;\t\tleft:0px;\t\ttop:10px;\t\tbottom:0px;\t\twidth:300px;\t\theight:40px;\t\ttext-align:center;",THREE.DefaultLoadingManager.onStart=function(e,t,n){},THREE.DefaultLoadingManager.onProgress=function(e,a,r){var o=100*a/r;n.innerHTML="Loading: "+Math.round(o)+" %";var i=300*o/100;t.style.width=i+"px"},THREE.DefaultLoadingManager.onLoad=function(){e.style.display="none",assetsLoaded=!0},THREE.DefaultLoadingManager.onError=function(e){console.log("error loading asset "+e)}}function spawnWorld(){(new THREE.TextureLoader).load("img/skyMap.jpg",function(e){e.mapping=THREE.UVMapping,function(e){var t=new THREE.Mesh(new THREE.SphereBufferGeometry(2e3,64,32),new THREE.MeshBasicMaterial({map:e}));t.scale.x=-1,t.rotation.y=Math.PI/180*150,scene.add(t)}(e)})}function initCamera(){(camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,4e3)).position.set(0,0,2),camera.lookAt(scene.position),scene.add(camera)}function initRenderer(){renderer=new THREE.WebGLRenderer({antialias:!0}),canvas=renderer.domElement,renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(canvas),window.addEventListener("resize",doResize,!1),clock=new THREE.Clock,renderer.setClearColor("rgb(0,0,0)"),renderer.shadowMapEnabled=!1,(scene=new THREE.Scene).background=new THREE.Color("rgb(80,80,80)")}function doResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),composer.setSize(window.innerWidth,window.innerHeight)}function initPostprocessing(){(composer=new THREE.EffectComposer(renderer)).addPass(new THREE.RenderPass(scene,camera)),postFx=new THREE.ShaderPass(THREE.VignetteShader),composer.addPass(postFx),postFx.renderToScreen=!0}var bla=0;THREE.OrbitControls=function(e,t){function n(){return Math.pow(.95,f.zoomSpeed)}function a(e){y.theta-=e}function r(e){y.phi-=e}function o(e){f.object instanceof THREE.PerspectiveCamera?C/=e:f.object instanceof THREE.OrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*e)),f.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function i(e){f.object instanceof THREE.PerspectiveCamera?C*=e:f.object instanceof THREE.OrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/e)),f.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function s(e){if(!1!==f.enabled){if(e.preventDefault(),e.button===f.mouseButtons.ORBIT){if(!1===f.enableRotate)return;!function(e){P.set(e.clientX,e.clientY)}(e),v=R.ROTATE}else if(e.button===f.mouseButtons.ZOOM){if(!1===f.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),v=R.DOLLY}else if(e.button===f.mouseButtons.PAN){if(!1===f.enablePan)return;!function(e){S.set(e.clientX,e.clientY)}(e),v=R.PAN}v!==R.NONE&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",d,!1),f.dispatchEvent(b))}}function c(e){if(!1!==f.enabled)if(e.preventDefault(),v===R.ROTATE){if(!1===f.enableRotate)return;!function(e){O.set(e.clientX,e.clientY),L.subVectors(O,P);var t=f.domElement===document?f.domElement.body:f.domElement;a(2*Math.PI*L.x/t.clientWidth*f.rotateSpeed),r(2*Math.PI*L.y/t.clientHeight*f.rotateSpeed),P.copy(O),f.update()}(e)}else if(v===R.DOLLY){if(!1===f.enableZoom)return;!function(e){U.set(e.clientX,e.clientY),N.subVectors(U,A),N.y>0?o(n()):N.y<0&&i(n()),A.copy(U),f.update()}(e)}else if(v===R.PAN){if(!1===f.enablePan)return;!function(e){j.set(e.clientX,e.clientY),D.subVectors(j,S),V(D.x,D.y),S.copy(j),f.update()}(e)}}function d(e){!1!==f.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),f.dispatchEvent(T),v=R.NONE)}function l(e){!1===f.enabled||!1===f.enableZoom||v!==R.NONE&&v!==R.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?i(n()):e.deltaY>0&&o(n()),f.update()}(e),f.dispatchEvent(b),f.dispatchEvent(T))}function E(e){!1!==f.enabled&&!1!==f.enableKeys&&!1!==f.enablePan&&function(e){switch(e.keyCode){case f.keys.UP:V(0,f.keyPanSpeed),f.update();break;case f.keys.BOTTOM:V(0,-f.keyPanSpeed),f.update();break;case f.keys.LEFT:V(f.keyPanSpeed,0),f.update();break;case f.keys.RIGHT:V(-f.keyPanSpeed,0),f.update()}}(e)}function u(e){if(!1!==f.enabled){switch(e.touches.length){case 1:if(!1===f.enableRotate)return;!function(e){P.set(e.touches[0].pageX,e.touches[0].pageY)}(e),v=R.TOUCH_ROTATE;break;case 2:if(!1===f.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);A.set(0,a)}(e),v=R.TOUCH_DOLLY;break;case 3:if(!1===f.enablePan)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY)}(e),v=R.TOUCH_PAN;break;default:v=R.NONE}v!==R.NONE&&f.dispatchEvent(b)}}function h(e){if(!1!==f.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===f.enableRotate)return;if(v!==R.TOUCH_ROTATE)return;!function(e){O.set(e.touches[0].pageX,e.touches[0].pageY),L.subVectors(O,P);var t=f.domElement===document?f.domElement.body:f.domElement;a(2*Math.PI*L.x/t.clientWidth*f.rotateSpeed),r(2*Math.PI*L.y/t.clientHeight*f.rotateSpeed),P.copy(O),f.update()}(e);break;case 2:if(!1===f.enableZoom)return;if(v!==R.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+a*a);U.set(0,r),N.subVectors(U,A),N.y>0?i(n()):N.y<0&&o(n()),A.copy(U),f.update()}(e);break;case 3:if(!1===f.enablePan)return;if(v!==R.TOUCH_PAN)return;!function(e){j.set(e.touches[0].pageX,e.touches[0].pageY),D.subVectors(j,S),V(D.x,D.y),S.copy(j),f.update()}(e);break;default:v=R.NONE}}function p(e){!1!==f.enabled&&(f.dispatchEvent(T),v=R.NONE)}function m(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=2,this.maxDistance=2,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=1/0,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=.4,this.enablePan=!1,this.keyPanSpeed=7,this.autoRotate=!0,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return H.phi},this.getAzimuthalAngle=function(){return H.theta},this.reset=function(){f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.zoom=f.zoom0,f.object.updateProjectionMatrix(),f.dispatchEvent(g),f.update(),v=R.NONE},this.update=function(){var t=new THREE.Vector3,n=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),r=n.clone().inverse(),o=new THREE.Vector3,i=new THREE.Quaternion;return function(){var e=f.object.position;return t.copy(e).sub(f.target),t.applyQuaternion(n),H.setFromVector3(t),f.autoRotate&&v===R.NONE&&a(2*Math.PI/60/60*f.autoRotateSpeed),H.theta+=y.theta,H.phi+=y.phi,H.theta=Math.max(f.minAzimuthAngle,Math.min(f.maxAzimuthAngle,H.theta)),H.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,H.phi)),H.makeSafe(),H.radius*=C,H.radius=Math.max(f.minDistance,Math.min(f.maxDistance,H.radius)),f.target.add(M),t.setFromSpherical(H),t.applyQuaternion(r),e.copy(f.target).add(t),f.object.lookAt(f.target),!0===f.enableDamping?(y.theta*=1-f.dampingFactor,y.phi*=1-f.dampingFactor):y.set(0,0,0),C=1,M.set(0,0,0),!!(x||o.distanceToSquared(f.object.position)>w||8*(1-i.dot(f.object.quaternion))>w)&&(f.dispatchEvent(g),o.copy(f.object.position),i.copy(f.object.quaternion),x=!1,!0)}}(),this.dispose=function(){f.domElement.removeEventListener("contextmenu",m,!1),f.domElement.removeEventListener("mousedown",s,!1),f.domElement.removeEventListener("wheel",l,!1),f.domElement.removeEventListener("touchstart",u,!1),f.domElement.removeEventListener("touchend",p,!1),f.domElement.removeEventListener("touchmove",h,!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),window.removeEventListener("keydown",E,!1)};var f=this,g={type:"change"},b={type:"start"},T={type:"end"},R={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},v=R.NONE,w=1e-6,H=new THREE.Spherical,y=new THREE.Spherical,C=1,M=new THREE.Vector3,x=!1,P=new THREE.Vector2,O=new THREE.Vector2,L=new THREE.Vector2,S=new THREE.Vector2,j=new THREE.Vector2,D=new THREE.Vector2,A=new THREE.Vector2,U=new THREE.Vector2,N=new THREE.Vector2,z=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),M.add(e)}}(),k=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),M.add(e)}}(),V=function(){var e=new THREE.Vector3;return function(t,n){var a=f.domElement===document?f.domElement.body:f.domElement;if(f.object instanceof THREE.PerspectiveCamera){var r=f.object.position;e.copy(r).sub(f.target);var o=e.length();o*=Math.tan(f.object.fov/2*Math.PI/180),z(2*t*o/a.clientHeight,f.object.matrix),k(2*n*o/a.clientHeight,f.object.matrix)}else f.object instanceof THREE.OrthographicCamera?(z(t*(f.object.right-f.object.left)/f.object.zoom/a.clientWidth,f.object.matrix),k(n*(f.object.top-f.object.bottom)/f.object.zoom/a.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();f.domElement.addEventListener("contextmenu",m,!1),f.domElement.addEventListener("mousedown",s,!1),f.domElement.addEventListener("wheel",l,!1),f.domElement.addEventListener("touchstart",u,!1),f.domElement.addEventListener("touchend",p,!1),f.domElement.addEventListener("touchmove",h,!1),window.addEventListener("keydown",E,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var scene,camera,light,renderer,composer,canvas,controls,cameraAndLight,clock,stats,maxAnisotropy,postFx,assetsLoaded=!1,loader=new THREE.JSONLoader,cubeCamNear=1,cubeCamFar=2100,cubeCamRes=512,updateCubeCams=!0,arCubeCameras=[];THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},THREE.VignetteShader={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 rgba = texture2D(tDiffuse, vUv);","float dist = distance(vec2(0.5,0.5), vUv.xy);","float maxDist = 0.25;","if(dist >= maxDist){","float pct = ( ((dist-maxDist)*100.0)/(0.5 - maxDist) ) / 100.0;","float val =  1.0 - pct * 0.7 ;","rgba.rgb = vec3(rgba.r*val, rgba.g*val, rgba.b*val);","}","gl_FragColor = vec4(rgba.r, rgba.g, rgba.b, rgba.a);","}"].join("\n")},THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},a=e.getDrawingBufferSize();(t=new THREE.WebGLRenderTarget(a.width,a.height,n)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===THREE.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,n,a=!1,r=this.passes.length;for(n=0;n<r;n++)if(!1!==(t=this.passes[n]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,a),t.needsSwap){if(a){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?a=!0:t instanceof THREE.ClearMaskPass&&(a=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(e,t){},render:function(e,t,n,a,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),THREE.RenderPass=function(e,t,n,a,r){THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=a,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,n,a,r){var o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var i,s;this.clearColor&&(i=e.getClearColor().getHex(),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(i,s),this.scene.overrideMaterial=null,e.autoClear=o}}),THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,n,a,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}});